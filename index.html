<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ü§ñ –£–º–Ω—ã–π –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç</title>
    <style>
        :root {
            --primary-color: #6c5ce7;
            --secondary-color: #a29bfe;
            --dark-color: #2d3436;
            --light-color: #f5f6fa;
            --user-color: #00b894;
            --assistant-color: #0984e3;
            --error-color: #d63031;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            margin: 0;
            padding: 0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .container {
            width: 100%;
            max-width: 800px;
            height: 90vh;
            display: flex;
            flex-direction: column;
            background-color: white;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            margin: 20px 0;
        }
        
        .header {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            color: white;
            padding: 20px;
            text-align: center;
            font-size: 1.5rem;
            font-weight: bold;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .status {
            font-size: 0.9rem;
            font-weight: normal;
            margin-top: 5px;
        }
        
        .chat-container {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            background-color: var(--light-color);
        }
        
        .message {
            margin-bottom: 15px;
            max-width: 80%;
            padding: 12px 18px;
            border-radius: 20px;
            line-height: 1.4;
            position: relative;
            animation: fadeIn 0.3s ease-out;
            word-wrap: break-word;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .user-message {
            background-color: var(--user-color);
            color: white;
            margin-left: auto;
            border-bottom-right-radius: 5px;
        }
        
        .assistant-message {
            background-color: white;
            color: var(--dark-color);
            margin-right: auto;
            border-bottom-left-radius: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        
        .error-message {
            background-color: var(--error-color);
            color: white;
            margin-right: auto;
            border-bottom-left-radius: 5px;
        }
        
        .input-area {
            display: flex;
            padding: 15px;
            background-color: white;
            border-top: 1px solid #eee;
            align-items: center;
        }
        
        #user-input {
            flex: 1;
            padding: 12px 20px;
            border: 2px solid #eee;
            border-radius: 30px;
            font-size: 1rem;
            outline: none;
            transition: border 0.3s;
        }
        
        #user-input:focus {
            border-color: var(--secondary-color);
        }
        
        #send-button, #voice-button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            margin-left: 10px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }
        
        #send-button:hover, #voice-button:hover {
            background-color: var(--secondary-color);
            transform: scale(1.05);
        }
        
        #voice-button.listening {
            background-color: var(--error-color);
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        .typing-indicator {
            display: inline-flex;
            padding: 10px 15px;
            background-color: white;
            border-radius: 20px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            margin-bottom: 15px;
        }
        
        .typing-dot {
            width: 8px;
            height: 8px;
            background-color: var(--secondary-color);
            border-radius: 50%;
            margin: 0 3px;
            animation: typingAnimation 1.4s infinite ease-in-out;
        }
        
        .typing-dot:nth-child(1) { animation-delay: 0s; }
        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }
        
        @keyframes typingAnimation {
            0%, 60%, 100% { transform: translateY(0); opacity: 0.6; }
            30% { transform: translateY(-5px); opacity: 1; }
        }
        
        .time {
            font-size: 0.7rem;
            color: #7f8c8d;
            margin-top: 5px;
            text-align: right;
        }
        
        .commands-btn {
            background-color: var(--secondary-color);
            color: white;
            border: none;
            border-radius: 20px;
            padding: 8px 15px;
            margin: 5px;
            cursor: pointer;
            font-size: 0.8rem;
            transition: background-color 0.3s;
        }
        
        .commands-btn:hover {
            background-color: var(--primary-color);
        }
        
        .commands-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            margin-top: 10px;
        }
        
        @media (max-width: 600px) {
            .container {
                height: 95vh;
                margin: 10px 0;
                border-radius: 10px;
            }
            
            .message {
                max-width: 90%;
                padding: 10px 15px;
                font-size: 0.95rem;
            }
            
            #user-input {
                padding: 10px 15px;
            }
            
            #send-button, #voice-button {
                width: 45px;
                height: 45px;
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div>üéôÔ∏è –ì–æ–ª–æ—Å–æ–≤–æ–π –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç</div>
            <div class="status" id="status">–ì–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ</div>
            <div class="commands-container" id="quick-commands">
                <button class="commands-btn" data-command="–ø—Ä–∏–≤–µ—Ç">–ü—Ä–∏–≤–µ—Ç</button>
                <button class="commands-btn" data-command="–≤—Ä–µ–º—è">–í—Ä–µ–º—è</button>
                <button class="commands-btn" data-command="–¥–∞—Ç–∞">–î–∞—Ç–∞</button>
                <button class="commands-btn" data-command="–ø–æ–º–æ—â—å">–ü–æ–º–æ—â—å</button>
            </div>
        </div>
        <div class="chat-container" id="chat-container"></div>
        <div class="input-area">
            <input type="text" id="user-input" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ –∏–ª–∏ —Å–∫–∞–∂–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..." autocomplete="off">
            <button id="voice-button">üé§</button>
            <button id="send-button">‚Üí</button>
        </div>
    </div>

    <script>
        // –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –±–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞
        const knowledgeBase = {
            "–ø—Ä–∏–≤–µ—Ç": [
                "–ü—Ä–∏–≤–µ—Ç! üëã –Ø –≤–∞—à —Ü–∏—Ñ—Ä–æ–≤–æ–π –ø–æ–º–æ—â–Ω–∏–∫. –ß–µ–º –º–æ–≥—É –ø–æ–º–æ—á—å?",
                "–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –†–∞–¥ –≤–∞—Å –≤–∏–¥–µ—Ç—å. –ö–∞–∫ –≤–∞—à–∏ –¥–µ–ª–∞?",
                "–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é! –ì–æ—Ç–æ–≤ –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –≤–∞—à–∏ –≤–æ–ø—Ä–æ—Å—ã."
            ],
            "–∫–∞–∫ –¥–µ–ª–∞": [
                "–£ –º–µ–Ω—è –≤—Å—ë –æ—Ç–ª–∏—á–Ω–æ! –Ø –≤—Å–µ–≥–æ –ª–∏—à—å –ø—Ä–æ–≥—Ä–∞–º–º–∞, –Ω–æ —Ä–∞–±–æ—Ç–∞—é –±–µ–∑ —Å–±–æ–µ–≤. üòä –ê —É –≤–∞—Å?",
                "–ö–∞–∫ —É –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ - –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ! –ê –∫–∞–∫ –≤–∞—à–∏ –¥–µ–ª–∞?",
                "–í—Å–µ —Å–∏—Å—Ç–µ–º—ã —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É—é—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ. –ì–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ! –ê —É –≤–∞—Å –∫–∞–∫ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ?"
            ],
            "—á—Ç–æ —Ç—ã —É–º–µ–µ—à—å": [
                "–Ø –º–æ–≥—É:\n‚Ä¢ –û—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã\n‚Ä¢ –ü–æ–¥—Å–∫–∞–∑—ã–≤–∞—Ç—å –≤—Ä–µ–º—è –∏ –¥–∞—Ç—É\n‚Ä¢ –î–∞–≤–∞—Ç—å –ø–æ–ª–µ–∑–Ω—ã–µ —Å–æ–≤–µ—Ç—ã\n‚Ä¢ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –±–µ—Å–µ–¥—É\n‚Ä¢ –†–∞—Å—Å–∫–∞–∑—ã–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ —Ñ–∞–∫—Ç—ã\n‚Ä¢ –î–µ–ª–∞—Ç—å –ø—Ä–æ—Å—Ç—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è\n‚Ä¢ –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –µ–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è",
                "–ú–æ–∏ —Ñ—É–Ω–∫—Ü–∏–∏:\n- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–æ–º–æ—â—å\n- –û—Ç–≤–µ—Ç—ã –Ω–∞ –æ–±—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã\n- –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–∞—Å—á–µ—Ç—ã\n- –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤–µ–ª–∏—á–∏–Ω\n- –ò –º–Ω–æ–≥–æ–µ –¥—Ä—É–≥–æ–µ!"
            ],
            "–ø–æ–∫–∞": [
                "–î–æ —Å–≤–∏–¥–∞–Ω–∏—è! –ë—É–¥—É —Ä–∞–¥ –ø–æ–º–æ—á—å –≤–∞–º —Å–Ω–æ–≤–∞.",
                "–ü–æ–∫–∞! –í–æ–∑–≤—Ä–∞—â–∞–π—Ç–µ—Å—å, –µ—Å–ª–∏ –ø–æ—è–≤—è—Ç—Å—è –≤–æ–ø—Ä–æ—Å—ã.",
                "–î–æ –≤—Å—Ç—Ä–µ—á–∏! –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è - —è –∑–¥–µ—Å—å."
            ],
            "—Å–ø–∞—Å–∏–±–æ": [
                "–í—Å–µ–≥–¥–∞ –ø–æ–∂–∞–ª—É–π—Å—Ç–∞! –û–±—Ä–∞—â–∞–π—Ç–µ—Å—å –µ—â—ë.",
                "–†–∞–¥ –±—ã–ª –ø–æ–º–æ—á—å! üòä",
                "–ù–µ —Å—Ç–æ–∏—Ç –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏! –≠—Ç–æ –º–æ—è —Ä–∞–±–æ—Ç–∞."
            ],
            "–≤—Ä–µ–º—è": [
                `–¢–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è: ${new Date().toLocaleTimeString('ru-RU')}`,
                `–°–µ–π—á–∞—Å —Ç–æ—á–Ω–æ ${new Date().toLocaleTimeString('ru-RU', {hour: '2-digit', minute:'2-digit'})}`,
                `–ú–æ–∏ —á–∞—Å—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç: ${new Date().toLocaleTimeString('ru-RU')}`
            ],
            "–¥–∞—Ç–∞": [
                `–°–µ–≥–æ–¥–Ω—è: ${new Date().toLocaleDateString('ru-RU', {weekday: 'long', year: 'numeric', month: 'long', day: 'numeric'})}`,
                `–¢–µ–∫—É—â–∞—è –¥–∞—Ç–∞: ${new Date().toLocaleDateString('ru-RU')}`,
                `–ö–∞–ª–µ–Ω–¥–∞—Ä—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç: ${new Date().toLocaleDateString('ru-RU', {day: 'numeric', month: 'long', year: 'numeric'})}`
            ],
            "–ø–æ–º–æ—â—å": [
                "–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:\n‚Ä¢ –ü—Ä–∏–≤–µ—Ç/–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ\n‚Ä¢ –ö–∞–∫ –¥–µ–ª–∞\n‚Ä¢ –ß—Ç–æ —Ç—ã —É–º–µ–µ—à—å\n‚Ä¢ –í—Ä–µ–º—è/–ö–æ—Ç–æ—Ä—ã–π —á–∞—Å\n‚Ä¢ –î–∞—Ç–∞/–ö–∞–∫–æ–µ —á–∏—Å–ª–æ\n‚Ä¢ –†–∞—Å—Å–∫–∞–∂–∏ —Ñ–∞–∫—Ç\n‚Ä¢ –ü–æ—Å—á–∏—Ç–∞–π [–≤—ã—Ä–∞–∂–µ–Ω–∏–µ]\n‚Ä¢ –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–π [–≤–µ–ª–∏—á–∏–Ω—ã]\n‚Ä¢ –ü–æ–∫–∞/–î–æ —Å–≤–∏–¥–∞–Ω–∏—è\n‚Ä¢ –°–æ–≤–µ—Ç/–ü–æ–¥—Å–∫–∞–∂–∏ —Å–æ–≤–µ—Ç\n‚Ä¢ –®—É—Ç–∫–∞/–†–∞—Å—Å–∫–∞–∂–∏ —à—É—Ç–∫—É",
                "–Ø –ø–æ–Ω–∏–º–∞—é:\n- –í–æ–ø—Ä–æ—Å—ã –æ –≤—Ä–µ–º–µ–Ω–∏ –∏ –¥–∞—Ç–µ\n- –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è\n- –ó–∞–ø—Ä–æ—Å—ã –æ –º–æ–∏—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è—Ö\n- –û–±—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã\n- –ü—Ä–æ—Å—å–±—ã –æ –ø–æ–º–æ—â–∏\n- –ó–∞–ø—Ä–æ—Å—ã —Ñ–∞–∫—Ç–æ–≤ –∏ —Å–æ–≤–µ—Ç–æ–≤"
            ],
            "–∫—Ç–æ —Ç—ã": [
                "–Ø - –≤–∞—à –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫, —Å–æ–∑–¥–∞–Ω–Ω—ã–π –Ω–∞ HTML, CSS –∏ JavaScript.",
                "–Ø –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç, –∑–∞–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–º–æ–≥–∞—Ç—å –≤–∞–º —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –∑–∞–¥–∞—á–∞–º–∏.",
                "–¶–∏—Ñ—Ä–æ–≤–æ–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç, –≥–æ—Ç–æ–≤—ã–π –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –≤–∞—à–∏ –≤–æ–ø—Ä–æ—Å—ã –∏ –ø–æ–º–æ—á—å —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –∑–∞–¥–∞—á–∞–º–∏."
            ],
            "—Ä–∞—Å—Å–∫–∞–∂–∏ —Ñ–∞–∫—Ç": [
                "–ó–Ω–∞–µ—Ç–µ –ª–∏ –≤—ã, —á—Ç–æ –º–µ–¥ - –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –ø—Ä–æ–¥—É–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –ø–æ—Ä—Ç–∏—Ç—Å—è? –ê—Ä—Ö–µ–æ–ª–æ–≥–∏ –Ω–∞—Ö–æ–¥–∏–ª–∏ –º–µ–¥ –≤ –µ–≥–∏–ø–µ—Ç—Å–∫–∏—Ö –≥—Ä–æ–±–Ω–∏—Ü–∞—Ö –≤–æ–∑—Ä–∞—Å—Ç–æ–º 3000 –ª–µ—Ç, –∏ –æ–Ω –±—ã–ª –≤—Å—ë –µ—â—ë —Å—ä–µ–¥–æ–±–µ–Ω!",
                "–ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π —Ñ–∞–∫—Ç: —Å–µ—Ä–¥—Ü–µ –≥–æ–ª—É–±–æ–≥–æ –∫–∏—Ç–∞ –Ω–∞—Å—Ç–æ–ª—å–∫–æ –±–æ–ª—å—à–æ–µ, —á—Ç–æ —á–µ–ª–æ–≤–µ–∫ –º–æ–∂–µ—Ç –ø—Ä–æ–ø–ª—ã—Ç—å —á–µ—Ä–µ–∑ –µ–≥–æ –∞—Ä—Ç–µ—Ä–∏–∏.",
                "–§–∞–∫—Ç: –±–∞–Ω–∞–Ω—ã - —ç—Ç–æ —è–≥–æ–¥—ã, –∞ –∫–ª—É–±–Ω–∏–∫–∞ - –Ω–µ—Ç! –° –±–æ—Ç–∞–Ω–∏—á–µ—Å–∫–æ–π —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è, –∫–ª—É–±–Ω–∏–∫–∞ - —ç—Ç–æ –ª–æ–∂–Ω–∞—è —è–≥–æ–¥–∞.",
                "–§–∞–∫—Ç: –≤ —á–µ–ª–æ–≤–µ—á–µ—Å–∫–æ–º —Ç–µ–ª–µ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∂–µ–ª–µ–∑–∞, —á—Ç–æ–±—ã —Å–¥–µ–ª–∞—Ç—å –≥–≤–æ–∑–¥—å –¥–ª–∏–Ω–æ–π 7,5 —Å–º.",
                "–§–∞–∫—Ç: –∫—Ä–æ–∫–æ–¥–∏–ª—ã –Ω–µ –º–æ–≥—É—Ç –≤—ã—Å–æ–≤—ã–≤–∞—Ç—å —è–∑—ã–∫ - –æ–Ω –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω –∫ –Ω–∏–∂–Ω–µ–π —á–µ–ª—é—Å—Ç–∏."
            ],
            "–ø–æ–≥–æ–¥–∞": [
                "–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, —è –Ω–µ –º–æ–≥—É –ø–æ–ª—É—á–∏—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ –ø–æ–≥–æ–¥–µ. –î–ª—è —ç—Ç–æ–≥–æ –Ω—É–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π API.",
                "–Ø –ø–æ–∫–∞ –Ω–µ —É–º–µ—é –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–æ–≥–æ–¥—É, –Ω–æ –º–æ–≥—É –ø–æ–¥—Å–∫–∞–∑–∞—Ç—å, –∫–∞–∫ —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ.",
                "–î–ª—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–≥–æ–¥–µ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–∞–π—Ç–∞—Ö –∏–ª–∏ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö."
            ],
            "—Å–æ–≤–µ—Ç": [
                "–í–æ—Ç –ø–æ–ª–µ–∑–Ω—ã–π —Å–æ–≤–µ—Ç: –¥–µ–ª–∞–π—Ç–µ –ø–µ—Ä–µ—Ä—ã–≤—ã –∫–∞–∂–¥—ã–µ 45-50 –º–∏–Ω—É—Ç —Ä–∞–±–æ—Ç—ã –∑–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–æ–º - —ç—Ç–æ –ø–æ–º–æ–∂–µ—Ç —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—å.",
                "–°–æ–≤–µ—Ç –¥–Ω—è: –Ω–∞—á–∏–Ω–∞–π—Ç–µ —É—Ç—Ä–æ —Å–æ —Å—Ç–∞–∫–∞–Ω–∞ –≤–æ–¥—ã - —ç—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç –æ—Ä–≥–∞–Ω–∏–∑–º—É –ø—Ä–æ—Å–Ω—É—Ç—å—Å—è.",
                "–ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Å–æ–≤–µ—Ç: –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –æ—Ç–∫–ª–∞–¥—ã–≤–∞–π—Ç–µ –Ω–∞ –∑–∞–≤—Ç—Ä–∞ —Ç–æ, —á—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —Å–µ–≥–æ–¥–Ω—è.",
                "–°–æ–≤–µ—Ç –ø–æ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ—Ö–Ω–∏–∫—É Pomodoro - 25 –º–∏–Ω—É—Ç —Ä–∞–±–æ—Ç—ã, 5 –º–∏–Ω—É—Ç –æ—Ç–¥—ã—Ö–∞.",
                "–§–∏–Ω–∞–Ω—Å–æ–≤—ã–π —Å–æ–≤–µ—Ç: –æ—Ç–∫–ª–∞–¥—ã–≤–∞–π—Ç–µ —Ö–æ—Ç—è –±—ã 10% –æ—Ç –∫–∞–∂–¥–æ–≥–æ –¥–æ—Ö–æ–¥–∞."
            ],
            "—à—É—Ç–∫–∞": [
                "–ü–æ—á–µ–º—É –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç –≤—Å–µ–≥–¥–∞ –ø—É—Ç–∞–µ—Ç –•—ç–ª–ª–æ—É–∏–Ω –∏ –†–æ–∂–¥–µ—Å—Ç–≤–æ?\n–ü–æ—Ç–æ–º—É —á—Ç–æ Oct 31 == Dec 25!",
                "–ö–∞–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç—ã –Ω–∞–∑—ã–≤–∞—é—Ç –æ—à–∏–±–∫—É, –∫–æ—Ç–æ—Ä—É—é –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏?\n–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å!",
                "–ü—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç –∑–≤–æ–Ω–∏—Ç –≤ —Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫—É:\n- –£ –º–µ–Ω—è –ø—Ä–æ–±–ª–µ–º–∞...\n- –ù–µ—Ç, —É –≤–∞—Å –ø—Ä–æ–±–ª–µ–º–∞, –∞ —É –º–µ–Ω—è —Ä–∞–±–æ—Ç–∞!",
                "–ü–æ—á–µ–º—É –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç—ã —Ç–∞–∫ –ø–ª–æ—Ö–æ –ø–∞—Ä–∫—É—é—Ç—Å—è?\n–ü–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω–∏ –≤—Å–µ–≥–¥–∞ –∏—â—É—Ç –∏–¥–µ–∞–ª—å–Ω–æ–µ –º–µ—Å—Ç–æ!",
                "–ö–∞–∫–æ–π —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è —Å–∞–º—ã–π –º—É–∑—ã–∫–∞–ª—å–Ω—ã–π?\nJavaScript - –ø–æ—Ç–æ–º—É —á—Ç–æ –≤ –Ω–µ–º –µ—Å—Ç—å —Å–∫—Ä–∏–ø—Ç—ã!"
            ],
            "–Ω–æ–≤–æ—Å—Ç–∏": [
                "–Ø –Ω–µ –∏–º–µ—é –¥–æ—Å—Ç—É–ø–∞ –∫ —Ç–µ–∫—É—â–∏–º –Ω–æ–≤–æ—Å—Ç—è–º, –Ω–æ –≤—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è –Ω–∞ –Ω–æ–≤–æ—Å—Ç–Ω—ã—Ö —Å–∞–π—Ç–∞—Ö.",
                "–ö–∞–∫ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç, —è –Ω–µ –ø–æ–ª—É—á–∞—é –Ω–æ–≤–æ—Å—Ç–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.",
                "–î–ª—è –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –Ω–æ–≤–æ—Å—Ç–µ–π —Ä–µ–∫–æ–º–µ–Ω–¥—É—é –ø–æ—Å–µ—Ç–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–Ω—ã–µ –ø–æ—Ä—Ç–∞–ª—ã."
            ],
            "–º—É–∑—ã–∫–∞": [
                "–Ø –Ω–µ –º–æ–≥—É –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å –º—É–∑—ã–∫—É, –Ω–æ –º–æ–≥—É –ø–æ—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞—Ç—å –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –º—É–∑—ã–∫–∞–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã: Spotify, –Ø–Ω–¥–µ–∫—Å.–ú—É–∑—ã–∫–∞, Apple Music.",
                "–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, —è –Ω–µ —É–º–µ—é –≤–∫–ª—é—á–∞—Ç—å –º—É–∑—ã–∫—É. –ù–æ –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –º—É–∑—ã–∫–∞–ª—å–Ω—ã–µ —Å—Ç—Ä–∏–º–∏–Ω–≥–æ–≤—ã–µ —Å–µ—Ä–≤–∏—Å—ã.",
                "–î–ª—è –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è –º—É–∑—ã–∫–∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è."
            ],
            "—Ñ–∏–ª—å–º": [
                "–•–æ—Ä–æ—à–∏–µ —Ñ–∏–ª—å–º—ã –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞: '–ù–∞—á–∞–ª–æ', '–ò–Ω—Ç–µ—Ä—Å—Ç–µ–ª–ª–∞—Ä', '–ó–µ–ª–µ–Ω–∞—è –∫–Ω–∏–≥–∞', '–ü–∞—Ä–∞–∑–∏—Ç—ã'.",
                "–†–µ–∫–æ–º–µ–Ω–¥—É—é –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å: '1+1', '–î–æ—Å—Ç–∞—Ç—å –Ω–æ–∂–∏', '–ë–µ–≥—É—â–∏–π –ø–æ –ª–µ–∑–≤–∏—é 2049'.",
                "–ò–∑ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Ö–æ—Ä–æ—à–∏—Ö —Ñ–∏–ª—å–º–æ–≤: '–û–ø–ø–µ–Ω–≥–µ–π–º–µ—Ä', '–î—é–Ω–∞', '–ë–∞—Ä–±–∏'."
            ],
            "–∫–Ω–∏–≥–∞": [
                "–†–µ–∫–æ–º–µ–Ω–¥—É—é –ø–æ—á–∏—Ç–∞—Ç—å: '–ê—Ç–æ–º–Ω—ã–µ –ø—Ä–∏–≤—ã—á–∫–∏' –î–∂–µ–π–º—Å–∞ –ö–ª–∏—Ä–∞, '7 –Ω–∞–≤—ã–∫–æ–≤ –≤—ã—Å–æ–∫–æ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã—Ö –ª—é–¥–µ–π' –°—Ç–∏–≤–µ–Ω–∞ –ö–æ–≤–∏.",
                "–•–æ—Ä–æ—à–∏–µ –∫–Ω–∏–≥–∏: '1984' –î–∂–æ—Ä–¥–∂–∞ –û—Ä—É—ç–ª–ª–∞, '–ú–∞—Å—Ç–µ—Ä –∏ –ú–∞—Ä–≥–∞—Ä–∏—Ç–∞' –ë—É–ª–≥–∞–∫–æ–≤–∞, '–¢—Ä–∏ —Ç–æ–≤–∞—Ä–∏—â–∞' –†–µ–º–∞—Ä–∫–∞.",
                "–°–æ–≤–µ—Ç—É—é –æ–±—Ä–∞—Ç–∏—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞: 'Sapiens' –Æ–≤–∞–ª—è –ù–æ—è –•–∞—Ä–∞—Ä–∏, '–¢–æ–Ω–∫–æ–µ –∏—Å–∫—É—Å—Å—Ç–≤–æ –ø–æ—Ñ–∏–≥–∏–∑–º–∞' –ú–∞—Ä–∫–∞ –ú—ç–Ω—Å–æ–Ω–∞."
            ],
            "–ø–æ—Å—á–∏—Ç–∞–π": [
                (expression) => {
                    try {
                        // –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤—ã—Ä–∞–∂–µ–Ω–∏—è
                        const sanitized = expression.replace(/[^-()\d/*+.]/g, '');
                        const result = eval(sanitized);
                        return `–†–µ–∑—É–ª—å—Ç–∞—Ç: ${result}`;
                    } catch (e) {
                        return "–ù–µ –º–æ–≥—É –≤—ã—á–∏—Å–ª–∏—Ç—å —ç—Ç–æ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∂–∏—Ç–µ –ø—Ä–æ—Å—Ç–æ–µ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä: 2+2*3";
                    }
                }
            ],
            "–∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–π": [
                (query) => {
                    const parts = query.split(' ');
                    if (parts.length < 4) return "–§–æ—Ä–º–∞—Ç: –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–π [—á–∏—Å–ª–æ] [–∏–∑ –µ–¥–∏–Ω–∏—Ü] –≤ [–µ–¥–∏–Ω–∏—Ü—ã], –Ω–∞–ø—Ä–∏–º–µ—Ä: –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–π 10 –º–µ—Ç—Ä–æ–≤ –≤ —Ñ—É—Ç—ã";
                    
                    const value = parseFloat(parts[1]);
                    if (isNaN(value)) return "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∂–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —á–∏—Å–ª–æ –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏";
                    
                    const fromUnit = parts[2].toLowerCase();
                    const toUnit = parts[4].toLowerCase();
                    
                    // –ü—Ä–æ—Å—Ç—ã–µ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏
                    const conversions = {
                        '–º–µ—Ç—Ä': { '—Ñ—É—Ç': 3.28084, '–¥—é–π–º': 39.3701, '—è—Ä–¥': 1.09361, '—Å–∞–Ω—Ç–∏–º–µ—Ç—Ä': 100 },
                        '—Ñ—É—Ç': { '–º–µ—Ç—Ä': 0.3048, '–¥—é–π–º': 12, '—è—Ä–¥': 0.333333, '—Å–∞–Ω—Ç–∏–º–µ—Ç—Ä': 30.48 },
                        '–≥—Ä–∞–¥—É—Å': { '—Ä–∞–¥–∏–∞–Ω': (val) => val * Math.PI / 180, '–≥—Ä–∞–¥—É—Å': (val) => val },
                        '—Ä–∞–¥–∏–∞–Ω': { '–≥—Ä–∞–¥—É—Å': (val) => val * 180 / Math.PI, '—Ä–∞–¥–∏–∞–Ω': (val) => val },
                        '–∫–∏–ª–æ–≥—Ä–∞–º–º': { '—Ñ—É–Ω—Ç': 2.20462, '–≥—Ä–∞–º–º': 1000, '—É–Ω—Ü–∏—è': 35.274 },
                        '—Ñ—É–Ω—Ç': { '–∫–∏–ª–æ–≥—Ä–∞–º–º': 0.453592, '–≥—Ä–∞–º–º': 453.592, '—É–Ω—Ü–∏—è': 16 }
                    };
                    
                    if (conversions[fromUnit] && conversions[fromUnit][toUnit]) {
                        const factor = conversions[fromUnit][toUnit];
                        const result = typeof factor === 'function' ? factor(value) : value * factor;
                        return `${value} ${fromUnit} = ${result.toFixed(2)} ${toUnit}`;
                    } else {
                        return `–ù–µ –º–æ–≥—É –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑ ${fromUnit} –≤ ${toUnit}. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –µ–¥–∏–Ω–∏—Ü—ã: –º–µ—Ç—Ä, —Ñ—É—Ç, –≥—Ä–∞–¥—É—Å, —Ä–∞–¥–∏–∞–Ω, –∫–∏–ª–æ–≥—Ä–∞–º–º, —Ñ—É–Ω—Ç`;
                    }
                }
            ]
        };

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è SpeechRecognition
        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
        let recognition;
        
        try {
            recognition = new SpeechRecognition();
            recognition.lang = 'ru-RU';
            recognition.interimResults = false;
            recognition.maxAlternatives = 1;
        } catch (e) {
            console.error("–ë—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏", e);
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è SpeechSynthesis
        const synth = window.speechSynthesis;
        const utterance = new SpeechSynthesisUtterance();
        utterance.lang = 'ru-RU';
        utterance.rate = 1.0;
        utterance.pitch = 1.0;

        // –≠–ª–µ–º–µ–Ω—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        const voiceButton = document.getElementById('voice-button');
        const statusElement = document.getElementById('status');
        const userInput = document.getElementById('user-input');
        const sendButton = document.getElementById('send-button');
        const chatContainer = document.getElementById('chat-container');
        const quickCommands = document.getElementById('quick-commands');
        
        let isListening = false;
        let lastMessageTime = 0;

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –±—Ä–∞—É–∑–µ—Ä–æ–º
        function checkCompatibility() {
            if (!recognition) {
                statusElement.textContent = "–ì–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è";
                voiceButton.disabled = true;
                voiceButton.title = "–í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é";
            }
            
            if (!synth) {
                statusElement.textContent = "–ì–æ–ª–æ—Å–æ–≤–æ–π –≤—ã–≤–æ–¥ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è";
            }
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –≤–≤–æ–¥–∞
        if (recognition) {
            recognition.onstart = () => {
                isListening = true;
                voiceButton.classList.add('listening');
                statusElement.textContent = "–°–ª—É—à–∞—é...";
                userInput.placeholder = "–ì–æ–≤–æ—Ä–∏—Ç–µ —Å–µ–π—á–∞—Å...";
            };

            recognition.onend = () => {
                isListening = false;
                voiceButton.classList.remove('listening');
                statusElement.textContent = "–ì–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ";
                userInput.placeholder = "–ù–∞–ø–∏—à–∏—Ç–µ –∏–ª–∏ —Å–∫–∞–∂–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...";
            };

            recognition.onresult = (event) => {
                const speechResult = event.results[0][0].transcript;
                userInput.value = speechResult;
                processUserInput(speechResult);
            };

            recognition.onerror = (event) => {
                console.error('–û—à–∏–±–∫–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è:', event.error);
                statusElement.textContent = "–û—à–∏–±–∫–∞: " + event.error;
                setTimeout(() => {
                    statusElement.textContent = "–ì–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ";
                }, 3000);
            };
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞
        voiceButton.addEventListener('click', () => {
            if (!recognition) {
                addMessageToChat("–ì–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤ –≤–∞—à–µ–º –±—Ä–∞—É–∑–µ—Ä–µ", 'assistant-message');
                return;
            }

            if (isListening) {
                recognition.stop();
            } else {
                try {
                    recognition.start();
                } catch (e) {
                    statusElement.textContent = "–û—à–∏–±–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –º–∏–∫—Ä–æ—Ñ–æ–Ω—É";
                    console.error("–û—à–∏–±–∫–∞:", e);
                    addMessageToChat("–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –º–∏–∫—Ä–æ—Ñ–æ–Ω—É. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –±—Ä–∞—É–∑–µ—Ä–∞.", 'error-message');
                }
            }
        });

        // –§—É–Ω–∫—Ü–∏—è –æ–∑–≤—É—á–∏–≤–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–∞
        function speak(text) {
            if (!synth) {
                console.log("–ì–æ–ª–æ—Å–æ–≤–æ–π –≤—ã–≤–æ–¥ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è");
                return;
            }
            
            // –û—Ç–º–µ–Ω—è–µ–º —Ç–µ–∫—É—â–µ–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ, –µ—Å–ª–∏ –µ—Å—Ç—å
            synth.cancel();
            
            utterance.text = text;
            synth.speak(utterance);
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞
        function processUserInput(message) {
            if (!message.trim()) return;
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            addMessageToChat(message, 'user-message');
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –Ω–∞–±–æ—Ä–∞
            showTypingIndicator();
            
            // –ò–º–∏—Ç–∏—Ä—É–µ–º –∑–∞–¥–µ—Ä–∂–∫—É –æ–±—Ä–∞–±–æ—Ç–∫–∏
            setTimeout(() => {
                hideTypingIndicator();
                try {
                    const response = getAssistantResponse(message.toLowerCase());
                    addMessageToChat(response, 'assistant-message');
                    speak(response);
                } catch (e) {
                    console.error("–û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–∞:", e);
                    addMessageToChat("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –≤–∞—à–µ–≥–æ –∑–∞–ø—Ä–æ—Å–∞", 'error-message');
                }
            }, 1000 + Math.random() * 1500);
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –æ—Ç–≤–µ—Ç–∞ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞
        function getAssistantResponse(message) {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
            if (message.startsWith("–ø–æ—Å—á–∏—Ç–∞–π") && message.length > 8) {
                const expression = message.substring(8).trim();
                const calculator = knowledgeBase["–ø–æ—Å—á–∏—Ç–∞–π"][0];
                return calculator(expression);
            }
            
            if (message.startsWith("–∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–π") && message.length > 11) {
                const query = message.substring(11).trim();
                const converter = knowledgeBase["–∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–π"][0];
                return converter(query);
            }
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ–±—ã—á–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
            for (const key in knowledgeBase) {
                if (message.includes(key)) {
                    const responses = knowledgeBase[key];
                    // –ï—Å–ª–∏ —ç—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è, –≤—ã–∑—ã–≤–∞–µ–º –µ–µ —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º
                    if (typeof responses[0] === 'function') {
                        continue;
                    }
                    return responses[Math.floor(Math.random() * responses.length)];
                }
            }
            
            // –ï—Å–ª–∏ –∫–æ–º–∞–Ω–¥–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞
            const now = Date.now();
            if (now - lastMessageTime > 30000) { // 30 —Å–µ–∫—É–Ω–¥
                lastMessageTime = now;
                return "–Ø –Ω–µ —Å–æ–≤—Å–µ–º –ø–æ–Ω—è–ª –≤–∞—à –≤–æ–ø—Ä–æ—Å. –ú–æ–∂–µ—Ç–µ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–∫–∞–∑–∞—Ç—å '–ø–æ–º–æ—â—å' –¥–ª—è —Å–ø–∏—Å–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–º–∞–Ω–¥.";
            }
            return "–ò–∑–≤–∏–Ω–∏—Ç–µ, —è –Ω–µ –ø–æ–Ω—è–ª –≤–∞—à –≤–æ–ø—Ä–æ—Å. –ú–æ–∂–µ—Ç–µ –ø–µ—Ä–µ—Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞—Ç—å?";
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —á–∞—Ç
        function addMessageToChat(text, className) {
            const messageElement = document.createElement('div');
            messageElement.classList.add('message', className);
            messageElement.textContent = text;
            
            // –î–æ–±–∞–≤–ª—è–µ–º –≤—Ä–µ–º—è —Å–æ–æ–±—â–µ–Ω–∏—è
            const timeElement = document.createElement('div');
            timeElement.classList.add('time');
            timeElement.textContent = new Date().toLocaleTimeString('ru-RU', {hour: '2-digit', minute:'2-digit'});
            messageElement.appendChild(timeElement);
            
            chatContainer.appendChild(messageElement);
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –Ω–∞–±–æ—Ä–∞
        function showTypingIndicator() {
            const indicator = document.createElement('div');
            indicator.classList.add('typing-indicator');
            indicator.id = 'typing-indicator';
            indicator.innerHTML = '<span class="typing-dot"></span><span class="typing-dot"></span><span class="typing-dot"></span>';
            chatContainer.appendChild(indicator);
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        // –°–∫—Ä—ã—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –Ω–∞–±–æ—Ä–∞
        function hideTypingIndicator() {
            const indicator = document.getElementById('typing-indicator');
            if (indicator) {
                indicator.remove();
            }
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
        sendButton.addEventListener('click', () => {
            const message = userInput.value.trim();
            if (message) {
                processUserInput(message);
                userInput.value = '';
            }
        });

        userInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                const message = userInput.value.trim();
                if (message) {
                    processUserInput(message);
                    userInput.value = '';
                }
            }
        });

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –±—ã—Å—Ç—Ä—ã—Ö –∫–æ–º–∞–Ω–¥
        quickCommands.addEventListener('click', (e) => {
            if (e.target.classList.contains('commands-btn')) {
                const command = e.target.getAttribute('data-command');
                processUserInput(command);
            }
        });

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.onload = function() {
            checkCompatibility();
            
            setTimeout(() => {
                const welcomeMsg = "–ü—Ä–∏–≤–µ—Ç! –Ø –≥–æ–ª–æ—Å–æ–≤–æ–π –ø–æ–º–æ—â–Ω–∏–∫. –ú–æ–∂–µ—Ç–µ –≥–æ–≤–æ—Ä–∏—Ç—å —Å–æ –º–Ω–æ–π, –Ω–∞–∂–∞–≤ –Ω–∞ –º–∏–∫—Ä–æ—Ñ–æ–Ω –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—è –±—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã –≤—ã—à–µ.";
                addMessageToChat(welcomeMsg, 'assistant-message');
                speak(welcomeMsg);
            }, 800);
        };

        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏—Å—Ç–æ—Ä–∏—é –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.addEventListener('beforeunload', () => {
            const messages = document.querySelectorAll('.message');
            const chatHistory = Array.from(messages).map(msg => ({
                text: msg.textContent.replace(msg.querySelector('.time')?.textContent || '', '').trim(),
                type: msg.classList.contains('user-message') ? 'user' : 'assistant',
                time: msg.querySelector('.time')?.textContent || ''
            }));
            localStorage.setItem('chatHistory', JSON.stringify(chatHistory));
        });

        // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        const savedHistory = localStorage.getItem('chatHistory');
        if (savedHistory) {
            const chatHistory = JSON.parse(savedHistory);
            chatHistory.forEach(msg => {
                addMessageToChat(msg.text, msg.type === 'user' ? 'user-message' : 'assistant-message');
            });
        }
    </script>
</body>
</html>
